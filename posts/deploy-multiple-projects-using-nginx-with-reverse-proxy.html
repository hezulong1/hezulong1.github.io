<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä½¿ç”¨ nginx åŒåŸŸåä¸‹éƒ¨ç½²å¤šä¸ª vue é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨åå‘ä»£ç† | HeZulong</title>
    <meta name="description" content="ä½•ç¥–é¾™çš„ç½‘ç»œæ—¥å¿—">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.DMkijyEG.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.2ed19cd1.js"></script>
    <script type="module" src="/assets/app.C38AKkke.js"></script>
    <link rel="modulepreload" href="/assets/app.C38AKkke.js">
    <link rel="modulepreload" href="/assets/posts_deploy-multiple-projects-using-nginx-with-reverse-proxy.md.BvkwbFkg.lean.js">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="theme" content="#000000">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144*144" href="/apple-touch-icon-144.png">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xz/fonts@1/serve/inter.min.css">
    <script id="check-browser">(()=>{const s=navigator.userAgent,e=s.indexOf("Windows")>=0,t=s.indexOf("Macintosh")>=0,c=s.indexOf("Linux")>=0,d=s.indexOf("Firefox")>=0,n=s.indexOf("Chrome")>=0,a=!n&&s.indexOf("Safari")>=0,f=s.indexOf("Edg/")>=0,i=e?"windows":c?"linux":t?"mac":"",o=n?"chromium":d?"firefox":a?"safari":"";i&&document.documentElement.classList.add(i),o&&document.documentElement.classList.add(o)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="xdnnjyo1"><header class="ngecjshw"><h3 class="kbcnmp21"><a href="/" title="Home">HeZulong</a></h3></header><main><!--[--><article class="lkvw5g3c"><h1>ä½¿ç”¨ nginx åŒåŸŸåä¸‹éƒ¨ç½²å¤šä¸ª vue é¡¹ç›®ï¼Œå¹¶ä½¿ç”¨åå‘ä»£ç†</h1><time datetime="2019-02-27T08:00:00+08:00">2019å¹´02æœˆ27æ—¥</time><nav aria-labelledby="post-outline-aria-label" class="lbc6a3hv uxo0kl0v"><div id="post-outline-aria-label" aria-level="2" class="gx941hbb" role="heading"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 512 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM64 256C64 238.3 78.33 224 96 224H480C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H96C78.33 288 64 273.7 64 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg><span>ON THIS PAGE</span></div><div class="mdxy9x7r"><div class="bv99p137"></div><ul class="kgc8n5lu root"><!--[--><!--]--></ul></div></nav><div style="position:relative;" id="post-content"><div><p>èŠ±äº†ä¸‰å¤©æ—¶é—´ï¼Œè¶ç€è¿˜æ²¡æœ‰å¿˜è®°ï¼Œå…ˆè®°å½•ä¸‹æ¥ã€‚</p><h2 id="xiao-guo" tabindex="-1">æ•ˆæœ <a class="header-anchor" href="#xiao-guo" aria-label="Permalink to â€œæ•ˆæœâ€">â€‹</a></h2><p>å‡è®¾æœ‰ä¸¤ä¸ªé¡¹ç›® project1 å’Œ project2ï¼Œè¿˜æœ‰ä¸€ä¸ª nginx è‡ªå¸¦çš„ index.html é¡µé¢ï¼Œåœ¨ index.html ä¸­æ·»åŠ é¡¹ç›®çš„å¯¹åº”é“¾æ¥ï¼ˆç¨åç²˜è´´å‡ºæ¥ï¼‰ï¼Œä»¥ä¾¿ç»Ÿä¸€ç®¡ç†å­é¡¹ç›®çš„è·¯ç”±ã€‚</p><p>æœŸæœ›å®ç°ä¸‹é¢çš„æ•ˆæœï¼š</p><ul><li>ç‚¹å‡» <a href="http://localhost:8080/" target="_blank" rel="noreferrer">http://localhost:8080/</a> è¿›å…¥æœ€å¤–å±‚çš„ index.html</li><li>ç‚¹å‡» <a href="http://localhost:8080/project1" target="_blank" rel="noreferrer">http://localhost:8080/project1</a> è¿›å…¥è¿›å…¥é¡¹ç›®ä¸€</li><li>ç‚¹å‡» <a href="http://localhost:8080/project2" target="_blank" rel="noreferrer">http://localhost:8080/project2</a> è¿›å…¥è¿›å…¥é¡¹ç›®äºŒ</li></ul><p>åºŸè¯ä¸å¤šè¯´ï¼Œå¼€å§‹é…ç½®ã€‚</p><h2 id="vue-de-pei-zhi" tabindex="-1">Vue çš„é…ç½® <a class="header-anchor" href="#vue-de-pei-zhi" aria-label="Permalink to â€œVue çš„é…ç½®â€">â€‹</a></h2><p>å½“å‰ä½¿ç”¨çš„æ˜¯ <code>vue-cli2</code> æ­å»ºçš„é¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦å¯¹åº”çš„ä¿®æ”¹é…ç½®å‚æ•°ã€‚</p><ul><li>config æ–‡ä»¶å¤¹ä¸‹çš„ index.jsï¼Œå› ä¸ºæ˜¯æ‰“åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ <code>build.assetsPublicPath</code> æ›´æ”¹å¯¹åº”é¡¹ç›®åï¼Œè­¬å¦‚</li></ul><div class="language-js"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">module</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  dev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {},</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    assetsPublicPath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project1/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ³¨æ„å‰åçš„ â€˜/â€™</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">module</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  dev</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {},</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  build</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    assetsPublicPath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project2/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ³¨æ„å‰åçš„ â€˜/â€™</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><ul><li>config æ–‡ä»¶å¤¹ä¸‹çš„ prod.env.js ä¿®æ”¹æˆè¿™æ ·ï¼š</li></ul><div class="language-js"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project1</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">module</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  NODE_ENV</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;production&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  BASE_API</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;/api/pro1&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¿™é‡Œå¾…ä¼šä¸ nginx é…ç½®å¯¹åº”</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project2</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">module</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">exports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  NODE_ENV</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;production&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  BASE_API</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&quot;/api/pro2&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¿™é‡Œå¾…ä¼šä¸ nginx é…ç½®å¯¹åº”</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><p><strong>[æ³¨æ„]</strong> å› ä¸ºæˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº† <code>BASE_API</code> ä½œä¸ºä»£ç†çš„å‰ç¼€ï¼Œå¦‚æœä½ çš„ä¸åœ¨è¿™è¾¹ï¼Œä½ éœ€è¦æ‰¾åˆ°ä½ è‡ªå·±çš„ä»£ç†é…ç½®</p><ul><li>å› ä¸ºæ¯ä¸ªäººçš„ <code>vue-router</code> æ–‡ä»¶é…ç½®ä¸ä¸€æ ·ï¼Œä½ éœ€è¦æ‰¾åˆ°ä½ çš„ router é…ç½®æ–‡ä»¶ï¼Œå†…éƒ¨ä¿®æ”¹ä¸ºï¼š</li></ul><div class="language-js"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// æˆ‘é‡‡ç”¨äº† history æ¨¡å¼ï¼Œhash æ¨¡å¼æˆ‘æ²¡æœ‰æµ‹è¯•ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯ä¸€æ ·çš„æ•ˆæœ</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">export</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> default</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Router</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  base</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project1/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ³¨æ„æ›´æ”¹ä½ å­é¡¹ç›®åï¼Œè¿™ä¸ªå¯¹åº”ä½ çš„ build.assetsPublicPath</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">history</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  scrollBehavior</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ({</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> y</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }),</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ³¨æ„è¿™æ˜¯ vue-router@3 ä¸­çš„å†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  routes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> []</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// project2</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">export</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> default</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Router</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  base</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project2/</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">history</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  scrollBehavior</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ({</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> y</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }),</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  routes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> []</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">})</span></span></code></pre></div><details class="details custom-block"><summary>æ³¨æ„</summary><p>åœ¨ <code>npm run build</code> å¯èƒ½ä¼šæŠ¥é”™ï¼š<code>.tap(*)</code> ä¹‹ç±»çš„ï¼Œé‚£æ˜¯å› ä¸ºæ‰“åŒ…ä¸­çš„ <code>html-webpack-plugin</code> ç‰ˆæœ¬å‡ºç°äº†é—®é¢˜ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥</p><div class="language-sh"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># è¿™ä¸ªç‰ˆæœ¬å°±æ˜¯ä½ çš„ package.json ä¸­çš„ç‰ˆæœ¬ï¼Œåªä¸è¿‡ä½ éœ€è¦é‡æ–°å†æŒ‡å®šè¿™ä¸ªç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> html-webpack-plugin@4.0.0-alpha</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -D</span></span></code></pre></div></details><h2 id="nginx-de-pei-zhi" tabindex="-1">Nginx çš„é…ç½® <a class="header-anchor" href="#nginx-de-pei-zhi" aria-label="Permalink to â€œNginx çš„é…ç½®â€">â€‹</a></h2><h3 id="mu-lu-jie-gou" tabindex="-1">ç›®å½•ç»“æ„ <a class="header-anchor" href="#mu-lu-jie-gou" aria-label="Permalink to â€œç›®å½•ç»“æ„â€">â€‹</a></h3><p>æ— å…³æ–‡ä»¶å…¨éƒ¨ä»¥ <code>...</code> å±•ç¤ºã€‚</p><div class="language-sh"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”œâ”€conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”œâ”€...</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # å…¶ä»–æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â””â”€nginx.conf</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”œâ”€html</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # åªçœ‹è¿™é‡Œï¼Œå…¶ä»–æš‚æ—¶æˆ‘æ²¡ç”¨åˆ° </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”œâ”€project1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   â”œâ”€index.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   â””â”€static</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â”œâ”€css</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â”œâ”€fonts</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â””â”€js</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”œâ”€project2</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   â”œâ”€index.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   â””â”€static</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â”œâ”€css</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â”œâ”€fonts</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       â””â”€js</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”‚</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â”œâ”€index.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â”‚</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  â””â”€50x.html</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">â””â”€...</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # å…¶ä»–æ–‡ä»¶</span></span></code></pre></div><p>è¯´æ˜ï¼šæˆ‘çš„ <code>nginx</code> ç›®å½•å°±æ˜¯åŸç”Ÿçš„ï¼Œå†…éƒ¨åŒ…å«äº†ä¸€ä¸ª <code>html</code> æ–‡ä»¶å¤¹ï¼Œä¸ºäº†çœäº‹ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨è¿™ä¸ªï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–çš„ç›®å½•ï¼Œä½†æ˜¯ç›®å‰è¿˜è¯·å’Œæˆ‘ä¸€æ ·çš„é…ç½®ï¼Œåé¢å¯ä»¥è‡ªå·±å®šåˆ¶åŒ–ã€‚</p><h3 id="pei-zhi-nginx-conf" tabindex="-1">é…ç½® nginx.conf <a class="header-anchor" href="#pei-zhi-nginx-conf" aria-label="Permalink to â€œé…ç½® nginx.confâ€">â€‹</a></h3><p>åœ¨ <code>conf</code> æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ° <code>nginx.conf</code> æ–‡ä»¶ï¼Œè®°å¾—å…ˆå¤‡ä»½ç„¶ååœ¨ä¿®æ”¹ï¼Œä¿®æ”¹éƒ¨åˆ†é›†ä¸­åœ¨ <code>http</code> æ¨¡å—ã€‚</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-90" id="tab-91" checked><label data-title="nginx.conf" for="tab-91">nginx.conf</label></div><div class="blocks"><div class="language-sh active"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># ...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># åå‘ä»£ç†</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">http</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  include</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mime.types</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  default_type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> application/octet-stream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #                  &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  #                  &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  sendfile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        on</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  keepalive_timeout</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  65</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  client_max_body_size</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 20M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  client_body_buffer_size</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 10M</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  large_client_header_buffers</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 128k</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # è¿™é‡Œå¯ä»¥åšé›†ç¾¤</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> p1_server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localhost:8081</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # è¿™é‡Œå¯ä»¥åšé›†ç¾¤</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> p2_server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localhost:8082</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  server</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    listen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    server_name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> localhost</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    charset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> utf-8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    proxy_connect_timeout</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 180</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    proxy_send_timeout</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 180</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    proxy_read_timeout</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 180</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Host</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> X-Forwarder-For</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $remote_addr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    root</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # è¿™é‡ŒæŒ‡å®šåˆšåˆšæˆ‘ä»¬çš„æ–‡ä»¶å¤¹</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # æ€»çš„é¡¹ç›®è·¯ç”±ï¼Œæˆ‘å·æ‡’ç›´æ¥å†™åœ¨äº†åŒä¸€ä¸ªæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # å¦‚æœæœ‰å¾ˆå¤šå¯ä»¥åœ¨é…ç½®å¤šä¸ª conf æ–‡ä»¶ï¼Œä½¿ç”¨ include å…³è”è¿›æ¥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      try_files</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # è¿™é‡Œå¯ä»¥ç†è§£æŒ‡å®šåˆ° html æ–‡ä»¶å¤¹ä¸‹çš„ index.html</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # project1</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # è¿™é‡Œå°±æ˜¯åˆšåˆšæˆ‘ä»¬åœ¨ vue é¡¹ç›®ä¸­ config/index.js çš„é…ç½® build.assetsPublicPathï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # ä¹Ÿæ˜¯ vue é¡¹ç›®ä¸­é…ç½®çš„ router ä¸­çš„ base</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ^~</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /project1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      try_files</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /project1/index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # è¿™é‡Œå¯ä»¥ç†è§£æŒ‡å®šåˆ° html æ–‡ä»¶å¤¹ä¸‹ project1 æ–‡ä»¶å¤¹ çš„ index.html</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # project2</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # è¿™é‡Œæ˜¯é¡¹ç›®äºŒçš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ^~</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /project2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      try_files</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $uri</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /project2/index.html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # è¿™é‡Œå¯ä»¥ç†è§£æŒ‡å®šåˆ° html æ–‡ä»¶å¤¹ä¸‹ project2 æ–‡ä»¶å¤¹ çš„ index.html</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # è¿™é‡Œæ˜¯ project1 é…ç½®éœ€è¦è°ƒç”¨çš„æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /api/pro1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # è¿™é‡Œå°±æ˜¯åœ¨ vue é¡¹ç›®ä¸­ prod.env.js çš„é…ç½® BASE_API </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_redirect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> off</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Host</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> X-Real-IP</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $remote_addr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> X-Forwarded-For</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $proxy_add_x_forwarded_for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_pass</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://p1_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # æ­¤å¤„çš„ p1_server å¯¹åº”çš„ä¸Šé¢çš„é…ç½® upstream p1_server {}ï¼Œè¿™é‡Œå¯ä»¥åšé›†ç¾¤ï¼Œæˆ‘ç”¨ä¸åˆ°ï¼Œå°±ç®€å•é…ç½®äº†</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # è¿™é‡Œæ˜¯ project1 é…ç½®éœ€è¦è°ƒç”¨çš„æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    location</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /api/pro2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_redirect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> off</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Host</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $host</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> X-Real-IP</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $remote_addr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_set_header</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> X-Forwarded-For</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $proxy_add_x_forwarded_for</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">      proxy_pass</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://p2_server</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # æ­¤å¤„çš„ p2_server å¯¹åº”çš„ä¸Šé¢çš„é…ç½® upstream p2_server {}ï¼Œè¿™é‡Œå¯ä»¥åšé›†ç¾¤ï¼Œæˆ‘ç”¨ä¸åˆ°ï¼Œå°±ç®€å•é…ç½®äº†</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # ...</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  }</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # ...</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre></div></div></div><h3 id="tian-jia-ce-shi-lian-jie" tabindex="-1">æ·»åŠ æµ‹è¯•é“¾æ¥ <a class="header-anchor" href="#tian-jia-ce-shi-lian-jie" aria-label="Permalink to â€œæ·»åŠ æµ‹è¯•é“¾æ¥â€">â€‹</a></h3><p>æ‰¾åˆ° index.htmlï¼Œæ·»åŠ ä¸Šé¡¹ç›®çš„é“¾æ¥ã€‚</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-99" id="tab-100" checked><label data-title="index.html" for="tab-100">index.html</label></div><div class="blocks"><div class="language- active"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">...</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Thank you for using nginx.</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">em</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> &lt;!-- åŸç‰ˆæ–‡ä»¶çš„ä½ç½® --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- start: è¿½åŠ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">hr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">é¡¹ç›®ä¸€</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> | </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> href</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/project2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">é¡¹ç›®äºŒ</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">&lt;!-- end: è¿½åŠ --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> &lt;!-- åŸç‰ˆæ–‡ä»¶çš„ä½ç½® --&gt;</span></span></code></pre></div></div></div><h2 id="æœ€åçš„è°ƒè¯•" tabindex="-1">æœ€åçš„è°ƒè¯• <a class="header-anchor" href="#æœ€åçš„è°ƒè¯•" aria-label="Permalink to â€œæœ€åçš„è°ƒè¯•â€">â€‹</a></h2><p>æ‰€æœ‰çš„é…ç½®å®Œæˆï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨ <code>nginx</code> äº†ï¼Œè¿™ä¸ªä¸ä¼šçš„è¯·è‡ªè¡Œè§£å†³äº†ã€‚</p><p>å¯åŠ¨æˆåŠŸï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ <code>http://localhost:8080</code> æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ï¼Œ</p><p>ç‚¹å‡»é¡¹ç›®ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é“¾æ¥å˜ä¸º <code>http://localhost:8080/project1</code></p><p>ç‚¹å‡»é¡¹ç›®äºŒï¼Œé“¾æ¥å˜ä¸º <code>http://localhost:8080/project2</code>ï¼Œå®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œé‚£å°±æˆåŠŸäº†ã€‚</p><p><strong>[å¼ºè¡Œè§£é‡Šä¸€ä¸‹ç„å­¦]</strong> é‚£å¤©é…ç½®å¥½äº†ï¼Œä¸€å¯åŠ¨å°±æŠ¥é”™ï¼Œå¼„çš„æˆ‘æœ€åæ”¾å¼ƒäº†ã€‚ä½†æ˜¯ç¬¬äºŒå¤©ï¼Œå‡†å¤‡åœ¨æ£€æŸ¥ä¸‹ï¼Œä¸€å¯åŠ¨ç«Ÿç„¶å…¨å¥½äº†ï¼Œæˆ‘éƒ½ä¸€è„¸æ‡µé€¼å•Šï¼ å¦‚æœä½ ä¹Ÿé‡åˆ°å’Œæˆ‘ä¸€æ ·çš„é—®é¢˜ï¼Œå…ˆæ”¾æ”¾ï¼Œè¯´ä¸å®šéš”å¤©å°±å¥½äº†ã€‚ğŸ˜„</p></div></div></article><div class="cxmyf8y7"><span class="kal8uqjs disabled bz8snivf older"><!--[-->Prev<!--]--></span><a tabindex="0" class="kal8uqjs bz8snivf newer"><!--[--><!--[-->Next<!--]--><!--]--></a></div><!--]--></main><footer class="vut2zd8q"><small><time datetime="2026-01-21T16:54:54+08:00">2026</time> Â© HeZulong. </small><div class="jbzb3bsf"><a href="https://github.com/hezulong1" target="_blank" rel="noreferrer" tabindex="0" title="Github"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5c.08-1.25-.27-2.48-1-3.5c.28-1.15.28-2.35 0-3.5c0 0-1 0-3 1.5c-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.4 5.4 0 0 0 4 9c0 3.5 3 5.5 6 5.5c-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></g></svg><!--]--></a><a href="https://www.cnblogs.com/blackcat" target="_blank" rel="noreferrer" tabindex="0" title="åšå®¢å›­"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Carbon" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M8 18c-3.3 0-6 2.7-6 6s2.7 6 6 6s6-2.7 6-6s-2.7-6-6-6m0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4m22-4h-2C28 13 19 4 8 4V2c12.1 0 22 9.9 22 22"></path><path fill="currentColor" d="M22 24h-2c0-6.6-5.4-12-12-12v-2c7.7 0 14 6.3 14 14"></path></svg><!--]--></a></div><button class="kal8uqjs square etrcwlwr" aria-label="dark" aria-live="polite" title="åˆ‡æ¢æ˜æš—æ¨¡å¼"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></footer></div><div class="pae0gb7q foirxmhc"><button class="kal8uqjs square phgu1s4d" title="å›åˆ°é¡¶éƒ¨" tabindex="-1"><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M16 4L6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"></path></svg><!--]--></button><button class="kal8uqjs square" aria-label="dark" aria-live="polite" title="åˆ‡æ¢æ˜æš—æ¨¡å¼"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></div><!--]--></div>
    
    
  </body>
</html>