<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>小白学 TypeScript 有感 | HeZulong</title>
    <meta name="description" content="何祖龙的网络日志">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.DMkijyEG.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.2ed19cd1.js"></script>
    <script type="module" src="/assets/app.C38AKkke.js"></script>
    <link rel="modulepreload" href="/assets/app.C38AKkke.js">
    <link rel="modulepreload" href="/assets/posts_about-typescript.md.CRSBPMnc.lean.js">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="theme" content="#000000">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144*144" href="/apple-touch-icon-144.png">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@xz/fonts@1/serve/inter.min.css">
    <script id="check-browser">(()=>{const s=navigator.userAgent,e=s.indexOf("Windows")>=0,t=s.indexOf("Macintosh")>=0,c=s.indexOf("Linux")>=0,d=s.indexOf("Firefox")>=0,n=s.indexOf("Chrome")>=0,a=!n&&s.indexOf("Safari")>=0,f=s.indexOf("Edg/")>=0,i=e?"windows":c?"linux":t?"mac":"",o=n?"chromium":d?"firefox":a?"safari":"";i&&document.documentElement.classList.add(i),o&&document.documentElement.classList.add(o)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="xdnnjyo1"><header class="ngecjshw"><h3 class="kbcnmp21"><a href="/" title="Home">HeZulong</a></h3></header><main><!--[--><article class="lkvw5g3c"><h1>小白学 TypeScript 有感</h1><time datetime="2022-02-23T08:00:00+08:00">2022年02月23日</time><nav aria-labelledby="post-outline-aria-label" class="lbc6a3hv uxo0kl0v"><div id="post-outline-aria-label" aria-level="2" class="gx941hbb" role="heading"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 512 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM64 256C64 238.3 78.33 224 96 224H480C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H96C78.33 288 64 273.7 64 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg><span>ON THIS PAGE</span></div><div class="mdxy9x7r"><div class="bv99p137"></div><ul class="kgc8n5lu root"><!--[--><!--]--></ul></div></nav><div style="position:relative;" id="post-content"><div><p>说起 TypeScript（以下简称 TS），认识的蛮早，但是因为不喜欢强类型，所以一直排斥使用它。</p><p>但随着越来越多的程序员使用，慢慢的，我也重新审视自己，是不是太井底之蛙了？所以我又重新拾起它，一边阅读一些优秀源码，一边编写小工具来巩固下所学。总算把小工具完成了，我也谈下对比 JS，使用 TS 给我这个小白的感受。</p><p>首先是环境搭建，说实话一开始真不如直接搬运别人的配置，然后倒过来学习。但是我属于那种不弄清楚不罢休，然后过段时间全部忘记的人，这样通常就是在浪费时间。当然最后我还是配置完成了，只是时间浪费的可不是一星半点，所以真心推荐，<strong>新手小白还是先搬运好的配置，稍微熟练之后再尝试自己配置</strong>。</p><p>环境搭建完毕，就要开始写代码了，写代码途中我发现，之前声明了如下的类型：</p><div class="language-ts"><button title="复制代码" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">export</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> type</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> PropertyKey</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> string</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> |</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> undefined</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> |</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> null</span></span></code></pre></div><p>因为我需要使用这种类型，结果无意间看到 TS 内置了一个叫做 <code>PropertyKey</code> 的类型接口，这就很尴尬了。等于我重复定义了，而且它定义的比我准确多了，有人可能会说你不会去参考看下 <code>lib.dom</code> 库啊，可是关键如果一个新手来做，他知道这个库吗？</p><p>这是写类型遇到的第一个问题：<strong>内置类型/接口不知道如何寻找</strong>。</p><p>当然第一个问题对于我来说还是很好解决的，那么第二个问题就有些复杂，就是我写了一个公共的回调函数，在 TS 中因为不同的接口实现都定义了一套自己的回调类型，结果就是我写的这个方法不停的在转化类型（目前也是这么做的，应该可以优化）。于是我就想到能不能根据谁使用，那么根据使用者来推断类型。答案自然是有的，毕竟我是个后来者，在网络上的列子中我知道了 <code>extends</code> 和 <code>infer</code> 关键字，说真的，至少当时我激动了，有解决方案。可以网络上说的真的太基础，或者官网示例，虽然看了很多，但是说清楚的没几个，至于到现在我对这个 <code>infer</code> 只有特定环境才可以明白如何写，接口就是我依旧没有找到方法去实现我的想法（有一篇<a href="https://my.oschina.net/u/4318809/blog/4293100" target="_blank" rel="noreferrer">文章</a> 我个人觉着讲的还行，因为不是盲目的粘贴复制）。这是我遇到的第二个问题：<strong>如何编写高校的检测类型</strong>。</p><p>遇到的第三个就是关于 eslint，我使用的是官方团队产品 <code>@typescript-eslint/eslint-plugin</code>，可以说提示的还不错，但是每次在写到 JS 中的 <code>object</code> 类型我就是很纠结，因为推荐我使用 <code>Record</code> 类型，我也听话，调整后发现 option 对象不能被 <code>Record</code> 类型兼容，明明定义的 option 类型就是 <code>Record&lt;string, unknown&gt;</code>，为什么还是提示错误呢，后来我换成了 <code>object</code> 类型就可以。目前而言，关于对象的表示依旧不是很清楚怎么写，是写<code>Object</code>，还是<code>object</code>，还是<code>Record</code>，虽然<code>eslint</code>推荐使用<code>Record</code>，但是对于小白来说，真的迷糊了。这只是我举得一个列子，其实就是想说我遇到的第三个问题：<strong>到底应该如何使用合理的类型</strong>。</p><p><s>那么第四个问题，我需要向原始对象 <code>HTMLElement</code> 添加属性，但是 TS 提示不可以，我也能理解，所以为了不污染原始对象，我重新声明了一个新类型：<code>IDomNode</code>，它继承了HTMLElement，写到最后都是没有问题的，但是测试调用时提示，不可传入 <code>HTMLElement</code>，因为 <code>HTMLElement</code> 没有 <code>IDomNode</code> 上的一些属性，关键这个 <code>IDomNode</code> 又不是一上来就有，难道需要自己再写个方法将每一个 <code>HTMLElement</code> 初始化成 <code>IDomNode</code>，最后我先使用了折中办法，将所有的<code>IDomNode</code> 类的属性变成可选，这就导致只要是使用到 <code>IDomNode</code> 的属性需要先判空，虽然可以肯定他们存在，但是 TS 不信他们是存在的。所以我又写了一堆方法判空，感觉显得很多余。</s> 果然使用方式不对，应该是拿到 <code>HTMLElement</code>，内部转化成 <code>IDomNode</code> 类型即可。</p><p>网络上很多做对比的文章，当然都不及自己尝试写写 <strong>Type</strong>Script，它正如字面意思，就是为了检查类型的，可能很严格，但是真的很有用。不过就目前而言，以我的水平，TS 更多像枷锁一样，可能是我习惯 JS 太久了，还有很长的路要走。</p></div></div></article><div class="cxmyf8y7"><a tabindex="0" class="kal8uqjs bz8snivf older"><!--[--><!--[-->Prev<!--]--><!--]--></a><a tabindex="0" class="kal8uqjs bz8snivf newer"><!--[--><!--[-->Next<!--]--><!--]--></a></div><!--]--></main><footer class="vut2zd8q"><small><time datetime="2026-01-21T16:54:54+08:00">2026</time> © HeZulong. </small><div class="jbzb3bsf"><a href="https://github.com/hezulong1" target="_blank" rel="noreferrer" tabindex="0" title="Github"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5c.08-1.25-.27-2.48-1-3.5c.28-1.15.28-2.35 0-3.5c0 0-1 0-3 1.5c-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.4 5.4 0 0 0 4 9c0 3.5 3 5.5 6 5.5c-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></g></svg><!--]--></a><a href="https://www.cnblogs.com/blackcat" target="_blank" rel="noreferrer" tabindex="0" title="博客园"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Carbon" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M8 18c-3.3 0-6 2.7-6 6s2.7 6 6 6s6-2.7 6-6s-2.7-6-6-6m0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4m22-4h-2C28 13 19 4 8 4V2c12.1 0 22 9.9 22 22"></path><path fill="currentColor" d="M22 24h-2c0-6.6-5.4-12-12-12v-2c7.7 0 14 6.3 14 14"></path></svg><!--]--></a></div><button class="kal8uqjs square etrcwlwr" aria-label="dark" aria-live="polite" title="切换明暗模式"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></footer></div><div class="pae0gb7q foirxmhc"><button class="kal8uqjs square phgu1s4d" title="回到顶部" tabindex="-1"><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M16 4L6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"></path></svg><!--]--></button><button class="kal8uqjs square" aria-label="dark" aria-live="polite" title="切换明暗模式"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></div><!--]--></div>
    
    
  </body>
</html>