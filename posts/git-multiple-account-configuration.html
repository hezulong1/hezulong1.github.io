<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>配置 Git 多账户指南 | HeZulong</title>
    <meta name="description" content="何祖龙的网络日志">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.BkaHfg_d.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.14bdbe7f.js"></script>
    <script type="module" src="/assets/app.Da10uWFE.js"></script>
    <link rel="modulepreload" href="/assets/app.Da10uWFE.js">
    <link rel="modulepreload" href="/assets/posts_git-multiple-account-configuration.md.TITR1gGl.lean.js">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="theme" content="#000000">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144*144" href="/apple-touch-icon-144.png">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@xz/fonts@1/serve/inter.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <script id="check-browser">(()=>{const s=navigator.userAgent,e=s.indexOf("Windows")>=0,t=s.indexOf("Macintosh")>=0,c=s.indexOf("Linux")>=0,d=s.indexOf("Firefox")>=0,n=s.indexOf("Chrome")>=0,a=!n&&s.indexOf("Safari")>=0,f=s.indexOf("Edg/")>=0,i=e?"windows":c?"linux":t?"mac":"",o=n?"chromium":d?"firefox":a?"safari":"";i&&document.documentElement.classList.add(i),o&&document.documentElement.classList.add(o)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="xdnnjyo1"><header class="ngecjshw"><h3 class="kbcnmp21"><a href="/" title="Home">HeZulong</a></h3><span>:</span><ul class="rdvnksp5"><!--[--><li><a class="kze9qsvl" href="/bookmark" tabindex="0"><!--[-->Bookmark<!--]--></a></li><li><a class="kze9qsvl" href="/gist" tabindex="0"><!--[-->gist<!--]--></a></li><!--]--></ul></header><main><!--[--><article class="lkvw5g3c"><h1>配置 Git 多账户指南</h1><time datetime="2022-07-10T08:00:00+08:00">2022年07月10日</time><nav aria-labelledby="post-outline-aria-label" class="lbc6a3hv uxo0kl0v"><div id="post-outline-aria-label" aria-level="2" class="gx941hbb" role="heading"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 512 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM64 256C64 238.3 78.33 224 96 224H480C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H96C78.33 288 64 273.7 64 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg><span>ON THIS PAGE</span></div><div class="mdxy9x7r"><div class="bv99p137"></div><ul class="kgc8n5lu root"><!--[--><!--]--></ul></div></nav><div style="position:relative;" id="post-content"><div><p>当开发者同时拥有多个 Git 账户（如个人账户、公司账户）时，若操作时未留意当前账户，会导致提交记录(commit)的所属人混乱，不仅影响提交历史的整洁性，还会增加数据统计、权限管理的复杂度。</p><p>本文将通过 Git 多级别配置结合 SSH 公私钥方案，实现多账户的精准区分与自动匹配，彻底解决这一问题。</p><p>在 Git 中，配置分为三个层级，优先级依次递增（后者覆盖前者）：</p><ul><li><strong>系统级别(system)</strong>：对当前系统所有用户生效</li><li><strong>全局级别(global)</strong>：仅对当前用户所有仓库生效</li><li><strong>本地级别(local)</strong>：仅对当前所在仓库生效</li></ul><h2 id="查看各层级配置" tabindex="-1">查看各层级配置 <a class="header-anchor" href="#查看各层级配置" aria-label="Permalink to “查看各层级配置”">​</a></h2><p>通过以下命令可分别查看对应级别的所有配置项：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --system</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --local</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span></code></pre></div><p>配置优先级规则：<code>system</code> &lt; <code>global</code> &lt; <code>local</code>，当不同层级存在相同关键字时，优先级高的配置会覆盖优先级低的。</p><p>多数教程会直接配置全局级别的 <code>user.name</code> 和 <code>user.email</code>，这会导致多账户场景下提交归属混乱，因此我们需采用「全局清空 + 仓库本地配置」的方案。</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>若你的 Git 仓库使用 <code>HTTP(s)</code> 协议连接，无需配置 SSH 公私钥及相关文件，仅需执行「<a href="#reset-global-configuration">重置全局配置</a>」和「<a href="#configure-local-account-for-project">项目配置本地账户</a>」两步即可。</p></div><h2 id="reset-global-configuration" tabindex="-1">重置全局配置 <a class="header-anchor" href="#reset-global-configuration" aria-label="Permalink to “重置全局配置”">​</a></h2><p>首先清空全局级别的用户名和邮箱配置，避免其覆盖本地仓库配置：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看全局配置，确认是否存在 user.name 和 user.email</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 若存在，执行以下命令清除（无对应配置则跳过）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.name</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.email</span></span></code></pre></div><h2 id="generate-public-and-private-keys-for-different-accounts" tabindex="-1">生成不同账户的公私钥 <a class="header-anchor" href="#generate-public-and-private-keys-for-different-accounts" aria-label="Permalink to “生成不同账户的公私钥”">​</a></h2><p>通过 SSH 公私钥实现不同账户的身份认证，需为每个账户生成独立的密钥对，步骤如下：</p><ol><li>打开终端，进入 <code>.ssh</code> 目录（默认路径为用户根目录下，Windows 路径：<code>C:\Users\你的用户名\.ssh</code>，Mac/Linux 路径：<code>~/.ssh</code>）：</li></ol><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh</span></span></code></pre></div><ol start="2"><li>为每个账户生成公私钥，以「个人账户」和「公司账户」为例：</li></ol><ul><li>个人账户：账户名 <code>personal</code>，邮箱 <code>personal@abc.com</code></li><li>公司账户：账户名 <code>company</code>，邮箱 <code>company@abc.com</code></li></ul><p>执行生成命令，关键是<strong>自定义密钥文件名</strong>（避免默认 <code>id_rsa</code> 覆盖）：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 生成个人账户公私钥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh-keygen</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rsa</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">personal@abc.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 提示输入密钥保存路径时，输入自定义名称（如 personal），回车确认</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> which</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> save</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (~/.ssh/id_rsa): personal</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 后续提示设置密码（可选，直接回车跳过），直至密钥生成完成</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 生成公司账户公私钥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh-keygen</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rsa</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">company@abc.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 输入自定义名称（如 company），回车确认</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Enter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> in</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> which</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> to</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> save</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> the</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> key</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (~/.ssh/id_rsa): company</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 跳过密码设置，完成生成</span></span></code></pre></div><ol start="3"><li>生成后，<code>.ssh</code> 目录下会新增 4 个文件：<code>personal</code>（个人私钥）、<code>personal.pub</code>（个人公钥）、<code>company</code>（公司私钥）、<code>company.pub</code>（公司公钥）。</li></ol><h2 id="configure-public-and-private-keys-for-remote-repository" tabindex="-1">配置远程仓库公私钥 <a class="header-anchor" href="#configure-public-and-private-keys-for-remote-repository" aria-label="Permalink to “配置远程仓库公私钥”">​</a></h2><p>将每个账户的公钥配置到对应远程仓库（GitHub、GitLab 等），以实现身份认证：</p><ol><li>查看公钥内容（以个人账户为例）：</li></ol><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Mac/Linux</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh/personal.pub</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Windows（PowerShell）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">type</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh/personal.pub</span></span></code></pre></div><ol start="2"><li>复制输出的公钥内容（完整字符串，包含邮箱后缀）。</li><li>登录对应远程仓库，进入「个人设置 → SSH 密钥」页面，粘贴公钥并保存（不同平台操作类似，可查阅对应平台官方教程）。</li><li>重复上述步骤，将公司账户的 <code>company.pub</code> 配置到公司对应的远程仓库。</li></ol><h2 id="configure-the-ssh-config-file" tabindex="-1">配置 SSH Config 文件 <a class="header-anchor" href="#configure-the-ssh-config-file" aria-label="Permalink to “配置 SSH Config 文件”">​</a></h2><p>在 <code>.ssh</code> 目录下新建 <code>config</code> 文件（无后缀名），通过配置规则实现不同仓库自动匹配对应账户的密钥，内容如下：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 个人账户配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> personal-host</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 自定义别名（区分大小写，建议全部小写）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HostName</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> github.com</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 远程仓库域名（个人仓库所在平台，如 github.com）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IdentityFile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh/personal</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 个人私钥绝对路径</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PreferredAuthentications</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> publickey</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 认证方式（优先公钥，可省略）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">User</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> personal</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 个人账户名（可省略）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 公司账户配置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> company-host</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">HostName</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gitlab.com</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 公司仓库所在平台域名</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">IdentityFile</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh/company</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 公司私钥绝对路径</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">PreferredAuthentications</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> publickey</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">User</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> company</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 公司账户名（可省略）</span></span></code></pre></div><h3 id="configuration-instructions" tabindex="-1">配置说明 <a class="header-anchor" href="#configuration-instructions" aria-label="Permalink to “配置说明”">​</a></h3><ul><li>每个 <code>Host</code> 对应一个账户的配置，别名可自由定义，但会影响后续 Git 命令的仓库地址格式。</li><li>若个人仓库在 GitHub、公司仓库在 Gitlab，只需修改对应 <code>HostName</code> 为 <code>github.com</code> 即可。</li></ul><h2 id="add-private-key-to-local-ssh-proxy" tabindex="-1">添加私钥到本地 SSH 代理 <a class="header-anchor" href="#add-private-key-to-local-ssh-proxy" aria-label="Permalink to “添加私钥到本地 SSH 代理”">​</a></h2><p>将生成的私钥添加到本地 SSH 代理，避免每次操作都需重新指定密钥：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 切换到 .ssh 目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.ssh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加个人私钥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh-add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./personal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 添加公司私钥</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh-add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./company</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证私钥是否添加成功</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh-add</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>若执行 <code>ssh-add</code> 提示「Could not open a connection to your authentication agent」，先执行 <code>ssh-agent bash</code> 启动代理，再重新添加私钥。</p></div><h2 id="test-ssh-connection" tabindex="-1">测试 SSH 连接 <a class="header-anchor" href="#test-ssh-connection" aria-label="Permalink to “测试 SSH 连接”">​</a></h2><p>验证配置是否生效，通过自定义的 <code>Host</code> 别名测试与远程仓库的连接：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 测试个人账户连接（对应 personal-host 配置）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@personal-host</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@personal-host:xxx/xxx.git</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 测试公司账户连接（对应 company-host 配置）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@company-host</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 或者</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@company-host:xxx/xxx.git</span></span></code></pre></div><p>若输出「Hi 用户名！You&#39;ve successfully authenticated...」，说明连接成功。</p><h2 id="configure-local-account-for-project" tabindex="-1">项目配置本地账户 <a class="header-anchor" href="#configure-local-account-for-project" aria-label="Permalink to “项目配置本地账户”">​</a></h2><p>进入具体项目的根目录，配置该仓库专属的本地级别用户名和邮箱，确保提交记录归属正确：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入项目根目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /path/to/your/project</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 配置本地账户（个人项目用个人信息，公司项目用公司信息，假设进入个人项目）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">personal</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 对应账户名</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --local</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.email</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">personal@abc.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 对应邮箱</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 验证本地配置是否正确</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --local</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span></code></pre></div><p>每个项目需单独配置一次，配置后仅对当前项目生效。</p><h2 id="introduce-config" tabindex="-1"><code>config</code> 文件属性介绍 <a class="header-anchor" href="#introduce-config" aria-label="Permalink to “config 文件属性介绍”">​</a></h2><p><code>config</code> 文件中每个 <code>Host</code> 节点的核心属性说明如下，按需配置即可：</p><table tabindex="0"><thead><tr><th>属性名</th><th>取值说明</th></tr></thead><tbody><tr><td>Host</td><td>自定义别名，将替代远程仓库域名出现在 Git 命令中，如 <code>Host mygithub</code>，那么 <code>git@</code> 后面紧跟的名字改为 <code>mygithub</code>, 例：<code>git clone git@mygithub:用户名/仓库名.git</code></td></tr><tr><td>HostName</td><td>远程仓库真实域名</td></tr><tr><td>IdentityFile</td><td>私钥文件(id_rsa)的的绝对路径，确保路径正确，否则无法匹配密钥</td></tr><tr><td>PreferredAuthentications</td><td>认证优先级，可设为 <code>publickey</code>, <code>password</code>, <code>keyboard-interactive</code>，建议设为 <code>publickey</code></td></tr><tr><td>User</td><td>远程仓库用户名，可省略，SSH 认证主要依赖密钥，用户名仅作为辅助标识</td></tr></tbody></table><p>每个账号单独配置一个 <code>Host</code>，每个 <code>Host</code>要取一个别名，每个 <code>Host</code> 主要配置 <code>HostName</code> 和 <code>IdentityFile</code> 两个属性即可。</p><h2 id="correcting-historical-usernames-and-email-addresses" tabindex="-1">修正历史提交的用户名和邮箱 <a class="header-anchor" href="#correcting-historical-usernames-and-email-addresses" aria-label="Permalink to “修正历史提交的用户名和邮箱”">​</a></h2><p>若已用错误账户提交代码，可通过 <code>git filter-branch</code> 命令修改历史提交记录（<strong>谨慎使用，会改写仓库历史</strong>）：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> filter-branch</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --commit-filter</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  if [ &quot;$GIT_COMMITTER_NAME&quot; = &quot;错误用户名&quot; ];</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    then</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      GIT_COMMITTER_NAME=&quot;目标用户名&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      GIT_AUTHOR_NAME=&quot;$GIT_COMMITTER_NAME&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      GIT_COMMITTER_EMAIL=&quot;目标邮箱&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      GIT_AUTHOR_EMAIL=&quot;$GIT_COMMITTER_EMAIL&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      git commit-tree &quot;$@&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    else</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      git commit-tree &quot;$@&quot;;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  fi</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title custom-block-title-default">DANGER</p><p>该命令会改写仓库提交历史，若操作多人协作仓库，务必提前和团队成员沟通，避免覆盖他人提交！</p></div><h3 id="命令说明" tabindex="-1">命令说明 <a class="header-anchor" href="#命令说明" aria-label="Permalink to “命令说明”">​</a></h3><ul><li>替换<code>错误用户名</code>、<code>目标用户名</code>、<code>目标邮箱</code>为实际信息。</li><li><code>HEAD</code> 表示修改所有历史提交，可指定范围，例：<code>HEAD~5..HEAD</code> 仅修改最近 5 次提交。</li></ul><p>修改完成后，强制推送到远程仓库（确保本地是最新代码，避免覆盖他人提交）：</p><div class="language-sh"><button title="复制代码" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;user-select:none;-webkit-user-select:none;">$ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --force</span></span></code></pre></div></div></div></article><div class="cxmyf8y7"><span class="kal8uqjs disabled bz8snivf older"><!--[-->Prev<!--]--></span><a href="/posts/my-blog" tabindex="0" class="kal8uqjs bz8snivf newer"><!--[--><!--[-->Next<!--]--><!--]--></a></div><!--]--></main><footer class="vut2zd8q"><small><time datetime="2026-01-26T13:33:15+08:00">2026</time> © HeZulong. </small><div class="jbzb3bsf"><a href="https://github.com/hezulong1" target="_blank" rel="noreferrer" tabindex="0" title="Github"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5c.08-1.25-.27-2.48-1-3.5c.28-1.15.28-2.35 0-3.5c0 0-1 0-3 1.5c-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.4 5.4 0 0 0 4 9c0 3.5 3 5.5 6 5.5c-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></g></svg><!--]--></a><a href="https://www.cnblogs.com/blackcat" target="_blank" rel="noreferrer" tabindex="0" title="博客园"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Carbon" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M8 18c-3.3 0-6 2.7-6 6s2.7 6 6 6s6-2.7 6-6s-2.7-6-6-6m0 10c-2.2 0-4-1.8-4-4s1.8-4 4-4s4 1.8 4 4s-1.8 4-4 4m22-4h-2C28 13 19 4 8 4V2c12.1 0 22 9.9 22 22"></path><path fill="currentColor" d="M22 24h-2c0-6.6-5.4-12-12-12v-2c7.7 0 14 6.3 14 14"></path></svg><!--]--></a></div><button class="kal8uqjs square etrcwlwr" aria-label="dark" aria-live="polite" title="切换明暗模式"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></footer></div><div class="pae0gb7q foirxmhc"><button class="kal8uqjs square phgu1s4d" title="回到顶部" tabindex="-1"><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewbox="0 0 32 32"><path fill="currentColor" d="M16 4L6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"></path></svg><!--]--></button><button class="kal8uqjs square" aria-label="dark" aria-live="polite" title="切换明暗模式"><!--[--><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="vluk93lh"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"></path></svg><svg xmlns="http://www.w3.org/2000/svg" data-category="Lucide" width="1em" height="1em" viewbox="0 0 24 24" class="taak5gam"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"></path></g></svg><!--]--></button></div><!--]--></div>
    
    
  </body>
</html>